# Migration `20200824224815-users-table`

This migration has been generated by Sandro at 8/24/2020, 7:48:15 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `lgpdok-serverjs`.`Posts` (
`id` int  NOT NULL  AUTO_INCREMENT,
`title` varchar(191)  NOT NULL ,
`body` varchar(191)  NOT NULL ,
`published` boolean  NOT NULL ,
`userId` int  ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `lgpdok-serverjs`.`Users` (
`id` int  NOT NULL  AUTO_INCREMENT,
`email` varchar(191)  NOT NULL ,
`password` varchar(191)  NOT NULL ,
`name` varchar(191)  ,
UNIQUE Index `Users.email_unique`(`email`),
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `lgpdok-serverjs`.`Posts` ADD FOREIGN KEY (`userId`) REFERENCES `lgpdok-serverjs`.`Users`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

DROP TABLE `lgpdok-serverjs`.`post`
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200822144223-first-migration..20200824224815-users-table
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 model migration {
   revision           Int       @default(autoincrement()) @id
@@ -22,10 +22,22 @@
   @@map("_migration")
 }
-model post {
+model Post {
+  @@map("Posts")
+
   id        Int     @default(autoincrement()) @id
   title     String
   body      String
   published Boolean
 }
+
+model User {
+  @@map("Users")
+
+  id       Int     @id @default(autoincrement())
+  email    String  @unique
+  password String
+  name     String?
+  posts    Post[]
+}
```


